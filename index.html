<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Customer Success Form</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #f7f7f7;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    .container {
      background: #fff;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
  </style>
</head>
<body>
  <div class="container">
    <h1 class="text-center">Customer Success Form</h1>
    <form id="csForm">
      <!-- Seção de Recepção do Cliente -->
      <div class="mb-3">
        <label for="responsible" class="form-label">Nome do Responsável:</label>
        <input type="text" class="form-control" id="responsible" name="responsible" required>
      </div>
      <div class="mb-3">
        <label for="email" class="form-label">Email:</label>
        <input type="email" class="form-control" id="email" name="email" required>
      </div>

      <!-- Seção de Classificação do Produto -->
      <div class="mb-3">
        <label for="product" class="form-label">Produto:</label>
        <select class="form-select" id="product" name="product" required>
          <option value="GD">Geração Distribuída (GD)</option>
          <option value="Varejo">Varejo (Mercado Livre)</option>
        </select>
      </div>

      <!-- Seção de Sucesso do Cliente -->
      <div id="gdQuestions" class="mb-3" style="display:none;">
        <h3>Produto GD (Geração Distribuída)</h3>
        <div class="mb-3">
          <label for="confirmation" class="form-label">Você recebeu a confirmação da adesão ao GD?</label>
          <input type="text" class="form-control" id="confirmation" name="confirmation">
        </div>
        <div class="mb-3">
          <label for="discountInfo" class="form-label">Está ciente de que o desconto será aplicado após 90 dias?</label>
          <input type="text" class="form-control" id="discountInfo" name="discountInfo">
        </div>
        <div class="mb-3">
          <label for="feedback" class="form-label">Você enfrentou algum problema durante o processo de adesão?</label>
          <input type="text" class="form-control" id="feedback" name="feedback">
        </div>
      </div>
      
      <div id="retailQuestions" class="mb-3" style="display:none;">
        <h3>Produto Varejo (Mercado Livre)</h3>
        <div class="mb-3">
          <label for="improvement" class="form-label">Há algum aspecto do serviço que você gostaria de melhorar ou ajustar?</label>
          <input type="text" class="form-control" id="improvement" name="improvement">
        </div>
        <div class="mb-3">
          <label for="knowledge" class="form-label">Você está ciente de todas as opções e ofertas disponíveis no mercado livre?</label>
          <input type="text" class="form-control" id="knowledge" name="knowledge">
        </div>
      </div>

      <button type="button" class="btn btn-primary" onclick="submitForm()">Submit</button>
    </form>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script>
    document.getElementById('product').addEventListener('change', function () {
      var gdQuestions = document.getElementById('gdQuestions');
      var retailQuestions = document.getElementById('retailQuestions');
      if (this.value === 'GD') {
        gdQuestions.style.display = 'block';
        retailQuestions.style.display = 'none';
      } else {
        gdQuestions.style.display = 'none';
        retailQuestions.style.display = 'block';
      }
    });

    function submitForm() {
      const formData = {
        responsible: document.getElementById('responsible').value,
        email: document.getElementById('email').value,
        product: document.getElementById('product').value,
        confirmation: document.getElementById('confirmation').value || '',
        discountInfo: document.getElementById('discountInfo').value || '',
        feedback: document.getElementById('feedback').value || '',
        improvement: document.getElementById('improvement').value || '',
        knowledge: document.getElementById('knowledge').value || '',
      };

      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      doc.text("Customer Success Form", 20, 20);
      doc.text(`Nome do Responsável: ${formData.responsible}`, 20, 30);
      doc.text(`Email: ${formData.email}`, 20, 40);
      doc.text(`Produto: ${formData.product}`, 20, 50);

      if (formData.product === 'GD') {
        doc.text(`Confirmação: ${formData.confirmation}`, 20, 60);
        doc.text(`Desconto: ${formData.discountInfo}`, 20, 70);
        doc.text(`Feedback: ${formData.feedback}`, 20, 80);
      } else {
        doc.text(`Melhorias: ${formData.improvement}`, 20, 60);
        doc.text(`Conhecimento: ${formData.knowledge}`, 20, 70);
      }

      doc.save('customer_success_form.pdf');
    }
  </script>
</body>
</html>
